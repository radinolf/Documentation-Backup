# Changes and migration of version 6.3.0

– Starting from “Jalapeño”, Keycloak will be the default OIDC Server for Decisyon App Composer, replacing Caramel. Nevertheless, Caramel is still supported by “Jalapeño”, but the it will be removed from next release.

Replacing Caramel in an existing architecture requires the following actions:

* migrate all the existing users from Caramel to Keycloak;
* replace any existing Caramel-based tokens (used to invoke DAC’s REST Api, for example) with brand new token generated by DAC itself (now you have an introspect endpoint to validate the opaque token provided by DAC).&#x20;

&#x20;– D4C-4583 has changed the way the placeholder %ACCESS\_TOKEN% is interpreted when used in REST Data Source and REST Api definitions.&#x20;

* %ACCESS\_TOKEN% now is replaced with the access token issued by OIDC server;
* a new placeholder %DAC\_ACCESS\_TOKEN% has been introduced: it is replaced with the access token issued by DAC.

&#x20;Due to this changes, if your REST Api or REST Data Source need to access Api using the OIDC token, %ACCESS\_TOKEN% must be used; otherwise, if you need to access REST api of DAC,  %DAC\_ACCESS\_TOKEN% must be used.&#x20;

**Release Train**

Following are the artefacts of this release:

* decisyon-dac-docker-prod.jfrog.io/com.decisyon.appcomposer-home:JALAPENO.RELEASE
* decisyon-dac-docker-prod.jfrog.io/com.decisyon.appcomposer-azure:JALAPENO.RELEASE
* decisyon-dac-docker-prod.jfrog.io/com.decisyon.cornelius:JALAPENO.RELEASE
* decisyon-dac-docker-prod.jfrog.io/com.decisyon.keycloak:JALAPENO.RELEASE
* decisyon-dac-docker-prod.jfrog.io/com.decisyon.caramel:JAKE.RELEASE (note: Caramel does not have a JALAPENO version)
* http://repository.decisyon.com/public/dac-designstudio/release/jalapeno

**Configurable properties**

Following are the properties that need to be defined as environment variables to configure DAC properties:

| **Property**                                   | **Description**                                                                 | **Mandatory**                                                     |
| ---------------------------------------------- | ------------------------------------------------------------------------------- | ----------------------------------------------------------------- |
| **HTTP SETTINGS**                              |                                                                                 |                                                                   |
| server.https.enabled                           | Enable https                                                                    | NO: default value is false                                        |
| server.http2.enabled                           | Enable http2                                                                    | NO: default value is false                                        |
| **METADATA DATASOURCE**                        |                                                                                 |                                                                   |
| service.metadata.name                          | Name of the metadata service                                                    | YES: its value must be “metadata”                                 |
| metadata.user                                  | Specify user to use to authenticate to the database                             | YES                                                               |
| metadata.password                              | Password                                                                        | YES                                                               |
| metadata.database                              | Database name                                                                   | YES                                                               |
| metadata.schema                                | Specify name of the schema to use for Postgres                                  | This value is mandatory only if use Postgres                      |
| metadata.port                                  | Specify port of the database                                                    | YES                                                               |
| metadata.host                                  | Specify hostname of the database                                                | YES                                                               |
| metadata.url                                   | Specify jdbc connection url of the database.                                    | YES                                                               |
| metadata.minIdle                               |                                                                                 | NO: default value is 5                                            |
| metadata.maxPoolSize                           | Maximum pool size                                                               | NO: default value is 100                                          |
| metadata.idleTimeout                           | Maximum idle time for connection                                                | NO: default value is 300000                                       |
| metadata.connectionTimeout                     | Maximum number of milliseconds that a client will wait for a connection         | NO: default value is 300000                                       |
| metadata.maxLifeTime                           | Maximum lifetime in milliseconds of a connection in the pool after it is closed | NO: default value is 600000                                       |
| **SECURITY EXTENSIONS**                        |                                                                                 |                                                                   |
| appcomposer.caramel.enabled                    | Enable the support for Caramel                                                  | NO: default value is false, set it to true if use Caramel.        |
| appcomposer.keycloak.enabled                   | Enable the support for Keycloak                                                 | NO: default value is false, set it to true if use Keycloak.       |
| uaa.url                                        | User Management Endpoint                                                        | This value is mandatory if you use Keycloak or Caramel.           |
| appcomposer.azure.security.starter.enabled     | Enable support for Azure AD                                                     | NO: default value is false, set it to true if use Azure AD.       |
| appcomposer.schneider.security.starter.enabled | Enable support for Schneider IDMS                                               | NO: default value is false, set it to true if use Schenider IDMS. |
